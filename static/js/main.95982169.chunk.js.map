{"version":3,"sources":["moon.js","stellafane.js","useSavedState.js","App.js","reportWebVitals.js","index.js"],"names":["epoch","ecliptic_longitude_epoch","ecliptic_longitude_perigee","eccentricity","sun_smaxis","sun_angular_size_smaxis","moon_mean_longitude_epoch","moon_mean_perigee_epoch","node_mean_longitude_epoch","moon_inclination","moon_eccentricity","moon_angular_size","moon_smaxis","moon_parallax","synodic_month","lunations_base","earth_radius","INT","n","Math","floor","POW2","pow","POW3","POW4","COS","deg","cos","PI","fromTDTtoUTC","tobj","TBLfirst","TBL","deltaT","Year","getUTCFullYear","t","alert","Date","getTime","fromJDtoUTC","JD","alpha","Z","F","B","C","D","E","DT","Mon","Yr","Day","H","Hr","M","Min","Sec","theDate","setUTCFullYear","setUTCHours","calcMoonPhase","Y","K0","T","T2","T3","J0","F0","J","M0","M1","B1","K9","K","M5","M6","B6","R1","U","out","new","full","sin","UTC","push","calcEquiSol","k","year","JDE0","Error","calcInitial","W","dL","A","S","i","periodic24","useSavedState","key","defaultValue","useState","savedState","localStorage","getItem","JSON","parse","e","Function","state","setState","useCallback","newState","setItem","stringify","DAY_NAMES","english","norse","french","planets","latin","japanese","astronomical","babylonian","greek","hebrew","JULIAN_PREF","App","yearPreference","setYearPreference","dayNameOrigin","setDayNameOrigin","julianPreference","setJulianPreference","yearDayPreference","setYearDayPreference","monthBands","setMonthBands","weeks","d","count","week","j","setDate","getDate","makeWeeks","date","getUTCMonth","getUTCDate","getUTCDay","modifyToUTC","startOfWeek","startOfMonth","dayHeaderStyle","fontSize","dayNames","getDayClassName","currentMonth","getFullYear","getMonth","monthEven","yearAdjust","dayPreferences","yearDay","julian","className","value","onChange","target","type","checked","map","style","w","isStartOfMonth","some","currentWeek","now","dayNr","firstThursday","setMonth","getDay","ceil","weekNumber","textAlign","toString","padStart","DayView","preferences","padding","margin","border","background","startOfDay","position","julianStyle","display","top","left","lineHeight","SunIndicator","right","MoonIndicator","phases","Array","_","sunPhases","title","isSameDay","formatTime","newMoons","fullMoons","nextNewMoonIndex","findIndex","prevNewMoonIndex","prevNewMoon","fullMoon","nextNewMoon","firstQuarter","lastQuarter","moonPhases2","y","m","a","b","c","f","h","getUTCHours","getUTCMinutes","s","getUTCSeconds","ms","getUTCMilliseconds","g","date1","date2","first_jan","setTime","getTimezoneOffset","reportWebVitals","onPerfEntry","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.95982169.chunk.js","sourcesContent":["// moon.py, based on code by John Walker (http://www.fourmilab.ch/)\n// ported to Python by Kevin Turner <acapnotic@twistedmatrix.com>\n// on June 6, 2001 (JDN 2452066.52491), under a full moon.\n// This program is in the public domain: \"Do what thou wilt shall be\n// the whole of the law\".\n\n/* Functions to find the phase of the moon.\n\nPorted from \\\"A Moon for the Sun\\\" (aka moontool.c), a program by the\nvenerable John Walker.  He used algoritms from \\\"Practical Astronomy\nWith Your Calculator\\\" by Peter Duffett-Smith, Second Edition.\n\nFor the full history of the code, as well as references to other\nreading material and other entertainments, please refer to John\nWalker's website,\nhttp://www.fourmilab.ch/\n(Look under the Science/Astronomy and Space heading.)\n\nThe functions of primary interest provided by this module are phase(),\nwhich gives you a variety of data on the status of the moon for a\ngiven date; and phase_hunt(), which given a date, finds the dates of\nthe nearest full moon, new moon, etc.\n*/\n\n// Precision used when describing the moon's phase in textual format,\n// in phase_string().\nconst PRECISION = 0.05\nconst NEW =   0 / 4.0\nconst FIRST = 1 / 4.0\nconst FULL = 2 / 4.0\nconst LAST = 3 / 4.0\nconst NEXTNEW = 4 / 4.0\n\n\n// class MoonPhase {\n//     /* I describe the phase of the moon.\n\n//     I have the following properties:\n//         date - a DateTime instance\n//         phase - my phase, in the range 0.0 .. 1.0\n//         phase_text - a string describing my phase\n//         illuminated - the percentage of the face of the moon illuminated\n//         angular_diameter - as seen from Earth, in degrees.\n//         sun_angular_diameter - as seen from Earth, in degrees.\n\n//         new_date - the date of the most recent new moon\n//         q1_date - the date the moon reaches 1st quarter in this cycle\n//         full_date - the date of the full moon in this cycle\n//         q3_date - the date the moon reaches 3rd quarter in this cycle\n//         nextnew_date - the date of the next new moon\n//     */\n\n//     constructor (date=new Date()) {\n//         /* MoonPhase constructor.\n\n//         Give me a date, as either a Julian Day Number or a DateTime\n//         object.*/\n\n//         if not isinstance(date, DateTime.DateTimeType):\n//             this.date = DateTime.DateTimeFromJDN(date)\n//         else:\n//             this.date = date\n\n//         self.__dict__.update(phase(self.date))\n\n//         this.phase_text = phase_string(self.phase);\n//     }\n\n//     __getattr__(self, a) {\n//         if a in ['new_date', 'q1_date', 'full_date', 'q3_date',\n//                  'nextnew_date']:\n\n//             (self.new_date, self.q1_date, self.full_date,\n//              this.q3_date, self.nextnew_date) = phase_hunt(self.date)\n\n//             return getattr(self,a)\n//         raise AttributeError(a)\n//     }\n\n//     __repr__(self) {\n//         if type(self.date) is int:\n//             const jdn = self.date\n//         else:\n//             const jdn = self.date.jdn\n\n//         return \"<%s(%d)>\" % (self.__class__, jdn)\n//     }\n\n//     __str__(self) {\n//         if type(self.date) is int:\n//             const d = DateTime.DateTimeFromJDN(self.date)\n//         else:\n//             const d = self.date\n//         const s = \"%s for %s, %s (%%%.2f illuminated)\" %\\\n//             (self.__class__, d.strftime(), self.phase_text,\n//              self.illuminated * 100)\n\n//         return s\n//     }\n\n\nclass AstronomicalConstants {\n\n    // JDN stands for Julian Day Number\n    // Angles here are in degrees\n\n    // 1980 January 0.0 in JDN\n    // XXX: DateTime(1980).jdn yields 2444239.5 -- which one is right?\n    epoch = 2444238.5\n\n    // Ecliptic longitude of the Sun at epoch 1980.0\n    ecliptic_longitude_epoch = 278.833540\n\n    // Ecliptic longitude of the Sun at perigee\n    ecliptic_longitude_perigee = 282.596403\n\n    // Eccentricity of Earth's orbit\n    eccentricity = 0.016718\n\n    // Semi-major axis of Earth's orbit, in kilometers\n    sun_smaxis = 1.49585e8\n\n    // Sun's angular size, in degrees, at semi-major axis distance\n    sun_angular_size_smaxis = 0.533128\n\n    // Elements of the Moon's orbit, epoch 1980.0\n\n    // Moon's mean longitude at the epoch\n    moon_mean_longitude_epoch = 64.975464\n    // Mean longitude of the perigee at the epoch\n    moon_mean_perigee_epoch = 349.383063\n\n    // Mean longitude of the node at the epoch\n    node_mean_longitude_epoch = 151.950429\n\n    // Inclination of the Moon's orbit\n    moon_inclination = 5.145396\n\n    // Eccentricity of the Moon's orbit\n    moon_eccentricity = 0.054900\n\n    // Moon's angular size at distance a from Earth\n    moon_angular_size = 0.5181\n\n    // Semi-mojor axis of the Moon's orbit, in kilometers\n    moon_smaxis = 384401.0\n    // Parallax at a distance a from Earth\n    moon_parallax = 0.9507\n\n    // Synodic month (new Moon to new Moon), in days\n    synodic_month = 29.53058868\n\n    // Base date for E. W. Brown's numbered series of lunations (1923 January 16)\n    lunations_base = 2423436.0\n\n    // Properties of the Earth\n\n    earth_radius = 6378.16\n}\n\nconst c = new AstronomicalConstants()\n\n// Little handy mathematical functions.\n\nconst fixangle = (a) => a - 360.0 * Math.floor(a/360.0)\nconst torad = (d) => d * Math.PI / 180.0\nconst todeg = (r) => r * 180.0 / Math.PI\n// const dsin = (d) => Math.sin(torad(d))\n// const dcos = (d) => Math.cos(torad(d))\n\nexport function phase_string(p) {\n    const phase_strings = [\n        [NEW + PRECISION, \"new\"],\n        [FIRST - PRECISION, \"waxing crescent\"],\n        [FIRST + PRECISION, \"first quarter\"],\n        [FULL - PRECISION, \"waxing gibbous\"],\n        [FULL + PRECISION, \"full\"],\n        [LAST - PRECISION, \"waning gibbous\"],\n        [LAST + PRECISION, \"last quarter\"],\n        [NEXTNEW - PRECISION, \"waning crescent\"],\n        [NEXTNEW + PRECISION, \"new\"]]\n\n    let i = phase_strings.findIndex(ps => ps[0] > p);\n\n    if (i === -1) i = 0;\n\n    return phase_strings[i][1]\n}\n\n\nexport function phase(julianDate) {\n    /* Calculate phase of moon as a fraction:\n\n    The argument is the time for which the phase is requested,\n    expressed in either a DateTime or by Julian Day Number.\n\n    Returns a dictionary containing the terminator phase angle as a\n    percentage of a full circle (i.e., 0 to 1), the illuminated\n    fraction of the Moon's disc, the Moon's age in days and fraction,\n    the distance of the Moon from the centre of the Earth, and the\n    angular diameter subtended by the Moon as seen by an observer at\n    the centre of the Earth.*/\n\n    // Calculation of the Sun's position\n\n    // // date within the epoch\n    // if hasattr(phase_date, \"jdn\"):\n    //     const day = phase_date.jdn - c.epoch\n    // else:\n    //     const day = phase_date - c.epoch\n    const day = julianDate - c.epoch;\n\n    // Mean anomaly of the Sun\n    const N = fixangle((360/365.2422) * day)\n    // Convert from perigee coordinates to epoch 1980\n    const M = fixangle(N + c.ecliptic_longitude_epoch - c.ecliptic_longitude_perigee)\n\n    // Solve Kepler's equation\n    let Ec = kepler(M, c.eccentricity)\n    Ec = Math.sqrt((1 + c.eccentricity) / (1 - c.eccentricity)) * Math.tan(Ec/2.0)\n    // True anomaly\n    Ec = 2 * todeg(Math.atan(Ec))\n    // Suns's geometric ecliptic longuitude\n    const lambda_sun = fixangle(Ec + c.ecliptic_longitude_perigee)\n\n    // Orbital distance factor\n    const F = ((1 + c.eccentricity * Math.cos(torad(Ec))) / (1 - c.eccentricity**2))\n\n    // Distance to Sun in km\n    const sun_dist = c.sun_smaxis / F\n    const sun_angular_diameter = F * c.sun_angular_size_smaxis\n\n    // Calculation of the Moon's position\n\n    // Moon's mean longitude\n    const moon_longitude = fixangle(13.1763966 * day + c.moon_mean_longitude_epoch)\n\n    // Moon's mean anomaly\n    const MM = fixangle(moon_longitude - 0.1114041 * day - c.moon_mean_perigee_epoch)\n\n    // Moon's ascending node mean longitude\n    // const MN = fixangle(c.node_mean_longitude_epoch - 0.0529539 * day)\n\n    const evection = 1.2739 * Math.sin(torad(2*(moon_longitude - lambda_sun) - MM))\n\n    // Annual equation\n    const annual_eq = 0.1858 * Math.sin(torad(M))\n\n    // Correction term\n    const A3 = 0.37 * Math.sin(torad(M))\n\n    const MmP = MM + evection - annual_eq - A3\n\n    // Correction for the equation of the centre\n    const mEc = 6.2886 * Math.sin(torad(MmP))\n\n    // Another correction term\n    const A4 = 0.214 * Math.sin(torad(2 * MmP))\n\n    // Corrected longitude\n    const lP = moon_longitude + evection + mEc - annual_eq + A4\n\n    // Variation\n    const variation = 0.6583 * Math.sin(torad(2*(lP - lambda_sun)))\n\n    // True longitude\n    const lPP = lP + variation\n\n    // Calculation of the Moon's inclination\n    // unused for phase calculation.\n\n    // Corrected longitude of the node\n    // const NP = MN - 0.16 * Math.sin(torad(M))\n\n    // Y inclination coordinate\n    // const y = Math.sin(torad(lPP - NP)) * Math.cos(torad(c.moon_inclination))\n\n    // X inclination coordinate\n    // const x = Math.cos(torad(lPP - NP))\n\n    // Ecliptic longitude (unused?)\n    // const lambda_moon = todeg(atan2(y,x)) + NP\n\n    // Ecliptic latitude (unused?)\n    // const BetaM = todeg(asin(sin(torad(lPP - NP)) * Math.sin(torad(c.moon_inclination))))\n\n    // Calculation of the phase of the Moon\n\n    // Age of the Moon, in degrees\n    const moon_age = lPP - lambda_sun\n\n    // Phase of the Moon\n    const moon_phase = (1 - Math.cos(torad(moon_age))) / 2.0\n\n    // Calculate distance of Moon from the centre of the Earth\n    const moon_dist = (c.moon_smaxis * (1 - c.moon_eccentricity**2))\n                / (1 + c.moon_eccentricity * Math.cos(torad(MmP + mEc)))\n\n    // Calculate Moon's angular diameter\n    const moon_diam_frac = moon_dist / c.moon_smaxis\n    const moon_angular_diameter = c.moon_angular_size / moon_diam_frac\n\n    // Calculate Moon's parallax (unused?)\n    // const moon_parallax = c.moon_parallax / moon_diam_frac\n\n    const res = {\n        'phase': fixangle(moon_age) / 360.0,\n        'illuminated': moon_phase,\n        'age': c.synodic_month * fixangle(moon_age) / 360.0 ,\n        'distance': moon_dist,\n        'angular_diameter': moon_angular_diameter,\n        'sun_distance': sun_dist,\n        'sun_angular_diameter': sun_angular_diameter\n    }\n\n    return res\n}\n// phase()\n\n\n// function phase_hunt(date =  new Date()) {\n//     /* Find time of phases of the moon which surround the current date.\n\n//     Five phases are found, starting and ending with the new moons\n//     which bound the current lunation.\n//     */\n\n//     // const adate = sdate + DateTime.RelativeDateTime(days=-45)\n//     let adate = new Date(date);\n//     adate.setDate(adate.getDate() - 45);\n\n//     let k1 = Math.floor((adate.getFullYear() + (adate.getMonth() * (1.0/12.0)) - 1900) * 12.3685)\n\n//     const nt1 = meanphase(adate, k1)\n//     adate = nt1\n\n//     const sdate = julian(date);\n\n//     while (1) {:\n//         adate = adate + c.synodic_month\n//         const k2 = k1 + 1\n//         const nt2 = meanphase(adate,k2)\n//         if nt1 <= sdate < nt2:\n//             break\n//         const nt1 = nt2\n//         const k1 = k2\n//     }\n\n//     const phases = list(map(truephase,\n//                  [k1,    k1,    k1,    k1,    k2],\n//                  [0/4.0, 1/4.0, 2/4.0, 3/4.0, 0/4.0]))\n\n//     return phases\n// }\n// // phase_hunt()\n\n\n// meanphase(sdate, k) {\n//     /* Calculates time of the mean new Moon for a given base date.\n\n//     This argument K to this function is the precomputed synodic month\n//     index, given by:\n\n//                         const K = (year - 1900) * 12.3685\n\n//     where year is expressed as a year and fractional year.\n//     */\n\n//     // Time in Julian centuries from 1900 January 0.5\n//     if not hasattr(sdate,'jdn'):\n//         const delta_t = sdate - DateTime.DateTime(1900,1,1,12).jdn\n//         const t = delta_t / 36525\n//     else:\n//         const delta_t = sdate - DateTime.DateTime(1900,1,1,12)\n//         const t = delta_t.days / 36525\n\n//     // square for frequent use\n//     const t2 = t * t\n//     // and cube\n//     const t3 = t2 * t\n\n//     const nt1 = (\n//         2415020.75933 + c.synodic_month * k + 0.0001178 * t2 -\n//         0.000000155 * t3 + 0.00033 * dsin(166.56 + 132.87 * t -\n//         0.009173 * t2)\n//         )\n\n//     return nt1\n// // meanphase()\n\n\n// export function truephase(k, tphase) {\n//     /* Given a K value used to determine the mean phase of the new\n//     moon, and a phase selector (0.0, 0.25, 0.5, 0.75), obtain the\n//     true, corrected phase time.*/\n\n//     let apcor = false\n\n//     // add phase to new moon time\n//     k = k + tphase\n//     // Time in Julian centuries from 1900 January 0.5\n//     const t = k / 1236.85\n\n//     const t2 = t * t\n//     const t3 = t2 * t\n\n//     // Mean time of phase\n//     let pt = (\n//         2415020.75933 + c.synodic_month * k + 0.0001178 * t2 -\n//         0.000000155 * t3 + 0.00033 * dsin(166.56 + 132.87 * t -\n//         0.009173 * t2)\n//         )\n\n//     // Sun's mean anomaly\n//     const m = 359.2242 + 29.10535608 * k - 0.0000333 * t2 - 0.00000347 * t3\n\n//     // Moon's mean anomaly\n//     const mprime = 306.0253 + 385.81691806 * k + 0.0107306 * t2 + 0.00001236 * t3\n\n//     // Moon's argument of latitude\n//     const f = 21.2964 + 390.67050646 * k - 0.0016528 * t2 - 0.00000239 * t3\n\n//     if ((tphase < 0.01) || (Math.abs(tphase - 0.5) < 0.01)) {\n\n//         // Corrections for New and Full Moon\n\n//         pt = pt + (\n//             (0.1734 - 0.000393 * t) * dsin(m)\n//             + 0.0021 * dsin(2 * m)\n//             - 0.4068 * dsin(mprime)\n//             + 0.0161 * dsin(2 * mprime)\n//             - 0.0004 * dsin(3 * mprime)\n//             + 0.0104 * dsin(2 * f)\n//             - 0.0051 * dsin(m + mprime)\n//             - 0.0074 * dsin(m - mprime)\n//             + 0.0004 * dsin(2 * f + m)\n//             - 0.0004 * dsin(2 * f - m)\n//             - 0.0006 * dsin(2 * f + mprime)\n//             + 0.0010 * dsin(2 * f - mprime)\n//             + 0.0005 * dsin(m + 2 * mprime)\n//             )\n\n//         apcor = true\n//     }\n//     else if ((Math.abs(tphase - 0.25) < 0.01) || (Math.abs(tphase - 0.75) < 0.01)) {\n\n//         pt = pt + (\n//             (0.1721 - 0.0004 * t) * dsin(m)\n//             + 0.0021 * dsin(2 * m)\n//             - 0.6280 * dsin(mprime)\n//             + 0.0089 * dsin(2 * mprime)\n//             - 0.0004 * dsin(3 * mprime)\n//             + 0.0079 * dsin(2 * f)\n//             - 0.0119 * dsin(m + mprime)\n//             - 0.0047 * dsin(m - mprime)\n//             + 0.0003 * dsin(2 * f + m)\n//             - 0.0004 * dsin(2 * f - m)\n//             - 0.0006 * dsin(2 * f + mprime)\n//             + 0.0021 * dsin(2 * f - mprime)\n//             + 0.0003 * dsin(m + 2 * mprime)\n//             + 0.0004 * dsin(m - 2 * mprime)\n//             - 0.0003 * dsin(2 * m + mprime)\n//             )\n//         }\n//         if (tphase < 0.5) {\n//             //  First quarter correction\n//             pt = pt + 0.0028 - 0.0004 * dcos(m) + 0.0003 * dcos(mprime)\n//         }\n//         else {\n//             //  Last quarter correction\n//             pt = pt + -0.0028 + 0.0004 * dcos(m) - 0.0003 * dcos(mprime)\n//         }\n//         apcor = true\n\n//     if (!apcor)\n//         throw new Error(\n//             \"TRUEPHASE called with invalid phase selector \" + tphase)\n\n//     return fromJulian(pt)\n// }\n// truephase()\n\n\nfunction kepler (m, ecc) {\n    /* Solve the equation of Kepler.*/\n\n    const epsilon = 1e-6\n\n    m = torad(m)\n    let e = m\n    while (1) {\n        const delta = e - ecc * Math.sin(e) - m\n        e = e - delta / (1.0 - ecc * Math.cos(e))\n\n        if (Math.abs(delta) <= epsilon)\n            break;\n    }\n\n    return e\n}\n\n// if __name__ == '__main__':\n//     const m = MoonPhase()\n//     const s = /* The moon is %s, %.1f%% illuminated, %.1f days old./*  %\\\n//         (m.phase_text, m.illuminated * 100, m.age)\n//     print (s)\n\n// function fromJulian (julian) {\n//     return new Date((julian-2440587.5)*864e5)\n// }","//-----Utility Funtions------------------------------------------------------------\r\nfunction INT ( n ) { return Math.floor(n); }\t// Emulates BASIC's INT Funtion\r\nfunction POW2( n ) { return Math.pow(n,2); }\t// Square a number\r\nfunction POW3( n ) { return Math.pow(n,3); }\t// Cube a number\r\nfunction POW4( n ) { return Math.pow(n,4); }\t// Number to the 4th power\r\nfunction COS( deg ) { \t\t\t\t\t\t// Cosine function with degrees as input\r\n\treturn Math.cos( deg * Math.PI/180  );\r\n}\r\n\r\n//-----Correct TDT to UTC----------------------------------------------------------------\r\n// Meeus Astronomical Algorithms Chapter 10\r\nfunction fromTDTtoUTC( tobj ) {\r\n\t// Correction lookup table has entry for every even year between TBLfirst and TBLlast\r\n\tvar TBLfirst = 1620, TBLlast = 2002;\t// Range of years in lookup table\r\n\tvar TBL = [\t\t\t\t\t// Corrections in Seconds\r\n\t\t/*1620*/ 121,112,103, 95, 88,  82, 77, 72, 68, 63,  60, 56, 53, 51, 48,  46, 44, 42, 40, 38,\r\n\t\t/*1660*/  35, 33, 31, 29, 26,  24, 22, 20, 18, 16,  14, 12, 11, 10,  9,   8,  7,  7,  7,  7,\r\n\t\t/*1700*/   7,  7,  8,  8,  9,   9,  9,  9,  9, 10,  10, 10, 10, 10, 10,  10, 10, 11, 11, 11,\r\n\t\t/*1740*/  11, 11, 12, 12, 12,  12, 13, 13, 13, 14,  14, 14, 14, 15, 15,  15, 15, 15, 16, 16,\r\n\t\t/*1780*/  16, 16, 16, 16, 16,  16, 15, 15, 14, 13,\r\n\t\t/*1800*/ 13.1, 12.5, 12.2, 12.0, 12.0,  12.0, 12.0, 12.0, 12.0, 11.9,  11.6, 11.0, 10.2,  9.2,  8.2,\r\n\t\t/*1830*/  7.1,  6.2,  5.6,  5.4,  5.3,   5.4,  5.6,  5.9,  6.2,  6.5,   6.8,  7.1,  7.3,  7.5,  7.6,\r\n\t\t/*1860*/  7.7,  7.3,  6.2,  5.2,  2.7,   1.4, -1.2, -2.8, -3.8, -4.8,  -5.5, -5.3, -5.6, -5.7, -5.9,\r\n\t\t/*1890*/ -6.0, -6.3, -6.5, -6.2, -4.7,  -2.8, -0.1,  2.6,  5.3,  7.7,  10.4, 13.3, 16.0, 18.2, 20.2,\r\n\t\t/*1920*/ 21.1, 22.4, 23.5, 23.8, 24.3,  24.0, 23.9, 23.9, 23.7, 24.0,  24.3, 25.3, 26.2, 27.3, 28.2,\r\n\t\t/*1950*/ 29.1, 30.0, 30.7, 31.4, 32.2,  33.1, 34.0, 35.0, 36.5, 38.3,  40.2, 42.2, 44.5, 46.5, 48.5,\r\n\t\t/*1980*/ 50.5, 52.5, 53.8, 54.9, 55.8,  56.9, 58.3, 60.0, 61.6, 63.0,  63.8, 64.3]; /*2002 last entry*/\r\n\t\t// Values for Delta T for 2000 thru 2002 from NASA\r\n\tvar deltaT = 0; // deltaT = TDT - UTC (in Seconds)\r\n\tvar Year = tobj.getUTCFullYear();\r\n\tvar t = (Year - 2000) / 100;\t// Centuries from the epoch 2000.0\r\n\r\n\tif ( Year >= TBLfirst && Year <= TBLlast ) { // Find correction in table\r\n\t\tif (Year%2) { // Odd year - interpolate\r\n\t\t\tdeltaT = ( TBL[(Year-TBLfirst-1)/2] + TBL[(Year-TBLfirst+1)/2] ) / 2;\r\n\t\t} else { // Even year - direct table lookup\r\n\t\t\tdeltaT = TBL[(Year-TBLfirst)/2];\r\n\t\t}\r\n\t} else if( Year < 948) {\r\n\t\tdeltaT = 2177 + 497*t + 44.1*POW2(t);\r\n\t} else if( Year >=948) {\r\n\t\tdeltaT =  102 + 102*t + 25.3*POW2(t);\r\n\t\tif (Year>=2000 && Year <=2100) { // Special correction to avoid discontinurity in 2000\r\n\t\t\tdeltaT += 0.37 * ( Year - 2100 );\r\n\t\t}\r\n\t} else { alert(\"Error: TDT to UTC correction not computed\"); }\r\n\treturn( new Date( tobj.getTime() - (deltaT*1000) ) ); // JavaScript native time is in milliseonds\r\n} // End fromTDTtoUTC\r\n\r\n//-----Julian Date to UTC Date Object----------------------------------------------------\r\n// Meeus Astronomical Algorithms Chapter 7\r\nfunction fromJDtoUTC( JD ){\r\n\t// JD = Julian Date, possible with fractional days\r\n\t// Output is a JavaScript UTC Date Object\r\n    var A, alpha;\r\n    var Z = INT( JD + 0.5 ); // Integer JD's\r\n    var F = (JD + 0.5) - Z;\t // Fractional JD's\r\n    if (Z < 2299161) { A = Z; }\r\n    else {\r\n    \talpha = INT( (Z-1867216.25) / 36524.25 );\r\n    \tA = Z + 1 + alpha - INT( alpha / 4 );\r\n    }\r\n    var B = A + 1524;\r\n    var C = INT( (B-122.1) / 365.25 );\r\n    var D = INT( 365.25*C );\r\n    var E = INT( ( B-D )/30.6001 );\r\n    var DT = B - D - INT(30.6001*E) + F;\t// Day of Month with decimals for time\r\n    var Mon = E - (E<13.5?1:13);\t\t\t// Month Number\r\n    var Yr  = C - (Mon>2.5?4716:4715);\t\t// Year\r\n    var Day = INT( DT ); \t\t\t\t\t// Day of Month without decimals for time\r\n    var H = 24*(DT - Day);\t\t\t\t\t// Hours and fractional hours\r\n    var Hr = INT( H ); \t\t\t\t\t\t// Integer Hours\r\n    var M = 60*(H - Hr);\t\t\t\t\t// Minutes and fractional minutes\r\n    var Min = INT( M );\t\t\t\t\t\t// Integer Minutes\r\n    var Sec = INT( 60*(M-Min) );\t\t\t// Integer Seconds (Milliseconds discarded)\r\n    //Create and set a JavaScript Date Object and return it\r\n    var theDate = new Date(0);\r\n    theDate.setUTCFullYear(Yr, Mon-1, Day);\r\n    theDate.setUTCHours(Hr, Min, Sec);\r\n    return( theDate );\r\n} //End fromJDtoUTC\r\n\r\n//-----Moon Phase Calculation-----------------------------------------------------\r\nexport function calcMoonPhase( Y ) {\r\n  //Converted from Basic by Roger W. Sinnot, Sky & Telescope, March 1985.\r\n  var R1 = Math.PI / 180;\r\n  var U = false;\r\n  var K0, T, T2, T3, J0, F0, J, F, M0, M1, B1, K9, K, M5, M6, B6;\r\n\r\n  const out = {\r\n    new: [],\r\n    full: [],\r\n  };\r\n\r\n  K0 = INT((Y-1900)*12.3685);\r\n  T = (Y-1899.5) / 100;\r\n  T2 = T*T; T3 = T*T*T;\r\n  J0 = 2415020 + 29*K0;\r\n  F0 = 0.0001178*T2 - 0.000000155*T3;\r\n  F0 += (0.75933 + 0.53058868*K0);\r\n  F0 -= (0.000837*T + 0.000335*T2);\r\n  M0 = K0*0.08084821133;\r\n  M0 = 360*(M0 - INT(M0)) + 359.2242;\r\n  M0 -= 0.0000333*T2;\r\n  M0 -= 0.00000347*T3;\r\n  M1 = K0*0.07171366128;\r\n  M1 = 360*(M1 - INT(M1)) + 306.0253;\r\n  M1 += 0.0107306*T2;\r\n  M1 += 0.00001236*T3;\r\n  B1 = K0*0.08519585128;\r\n  B1 = 360*(B1 - INT(B1)) + 21.2964;\r\n  B1 -= 0.0016528*T2;\r\n  B1 -= 0.00000239*T3;\r\n  for ( K9=0; K9 <= 28; K9++ ) {\r\n    J = J0 + 14*K9; F = F0 + 0.765294*K9;\r\n    K = K9/2;\r\n    M5 = (M0 + K* 29.10535608)*R1;\r\n    M6 = (M1 + K*385.81691806)*R1;\r\n    B6 = (B1 + K*390.67050646)*R1;\r\n    F -= 0.4068*Math.sin(M6);\r\n    F += (0.1734 - 0.000393*T)*Math.sin(M5);\r\n    F += 0.0161*Math.sin(2*M6);\r\n    F += 0.0104*Math.sin(2*B6);\r\n    F -= 0.0074*Math.sin(M5 - M6);\r\n    F -= 0.0051*Math.sin(M5 + M6);\r\n    F += 0.0021*Math.sin(2*M5);\r\n    F += 0.0010*Math.sin(2*B6-M6);\r\n    F += 0.5 / 1440; //Adds 1/2 minute for proper rounding to minutes per Sky & Tel article\r\n    var JDE = J + F; \t\t\t\t// Julian Empheris Day with fractions for time of day\r\n\tvar TDT = fromJDtoUTC( JDE );\t\t// Convert Julian Days to TDT in a Date Object\r\n\tvar UTC = fromTDTtoUTC( TDT );\t\t// Correct TDT to UTC, both as Date Objects\r\n    if (U) {\r\n        out.full.push(UTC);\r\n    }\r\n    else {\r\n        out.new.push(UTC);\r\n    }\r\n    U = !U;\r\n} // Next\r\nreturn out;\r\n} //End calcMoonPhase\r\n\r\n\r\n//-----Calculate and Display a single event for a single year (Either a Equiniox or Solstice)\r\n// Meeus Astronmical Algorithms Chapter 27\r\n/**\r\n *\r\n * @param {number} k 0 = VE; 1 = SS; 2 = AE; 3 = WS\r\n * @param {number} year\r\n */\r\nexport function calcEquiSol( k, year ) {\r\n\tvar JDE0 = calcInitial( k, year);\t// Initial estimate of date of event\r\n\tvar T = ( JDE0 - 2451545.0) / 36525;\r\n\tvar W = 35999.373*T - 2.47;\r\n\tvar dL = 1 + 0.0334*COS(W) + 0.0007*COS(2*W);\r\n\tvar S = periodic24( T );\r\n\tvar JDE = JDE0 + ( (0.00001*S) / dL ); \t// This is the answer in Julian Emphemeris Days\r\n\tvar TDT = fromJDtoUTC( JDE );\t\t\t\t// Convert Julian Days to TDT in a Date Object\r\n\tvar UTC = fromTDTtoUTC( TDT );\t\t\t\t// Correct TDT to UTC, both as Date Objects\r\n    return UTC;\r\n} // End calcEquiSol\r\n\r\n//-----Calcualte an initial guess as the JD of the Equinox or Solstice of a Given Year\r\n// Meeus Astronmical Algorithms Chapter 27\r\nfunction calcInitial( k, year ) { // Valid for years 1000 to 3000\r\n\tvar JDE0=0, Y=(year-2000)/1000;\r\n\tswitch( k ) {\r\n\t  case 0: JDE0 = 2451623.80984 + 365242.37404*Y + 0.05169*POW2(Y) - 0.00411*POW3(Y) - 0.00057*POW4(Y); break;\r\n\t  case 1: JDE0 = 2451716.56767 + 365241.62603*Y + 0.00325*POW2(Y) + 0.00888*POW3(Y) - 0.00030*POW4(Y); break;\r\n\t  case 2: JDE0 = 2451810.21715 + 365242.01767*Y - 0.11575*POW2(Y) + 0.00337*POW3(Y) + 0.00078*POW4(Y); break;\r\n\t  case 3: JDE0 = 2451900.05952 + 365242.74049*Y - 0.06223*POW2(Y) - 0.00823*POW3(Y) + 0.00032*POW4(Y); break;\r\n      default: throw new Error(\"k must be in set {0, 1, 2, 3, 4} Received: \" + k);\r\n\t}\r\n\treturn JDE0;\r\n} // End calcInitial\r\n\r\n//-----Calculate 24 Periodic Terms----------------------------------------------------\r\n// Meeus Astronmical Algorithms Chapter 27\r\nfunction periodic24( T ) {\r\n\tvar A = [485,203,199,182,156,136,77,74,70,58,52,50,45,44,29,18,17,16,14,12,12,12,9,8];\r\n\tvar B = [324.96,337.23,342.08,27.85,73.14,171.52,222.54,296.72,243.58,119.81,297.17,21.02,\r\n\t\t\t247.54,325.15,60.93,155.12,288.79,198.04,199.76,95.39,287.11,320.81,227.73,15.45];\r\n\tvar C = [1934.136,32964.467,20.186,445267.112,45036.886,22518.443,\r\n\t\t\t65928.934,3034.906,9037.513,33718.147,150.678,2281.226,\r\n\t\t\t29929.562,31555.956,4443.417,67555.328,4562.452,62894.029,\r\n\t\t\t31436.921,14577.848,31931.756,34777.259,1222.114,16859.074];\r\n\tvar S = 0;\r\n\tfor( var i=0; i<24; i++ ) { S += A[i]*COS( B[i] + (C[i]*T) ); }\r\n\treturn S;\r\n}\r\n","import { useCallback, useState } from \"react\";\r\n\r\nexport function useSavedState (key, defaultValue) {\r\n    const [ state, setState ] = useState(() => {\r\n        const savedState = localStorage.getItem(key);\r\n\r\n        if (savedState) {\r\n            try {\r\n                return JSON.parse(savedState);\r\n            } catch (e) {}\r\n        }\r\n\r\n        if (defaultValue instanceof Function) {\r\n            return defaultValue();\r\n        }\r\n\r\n        return defaultValue;\r\n    });\r\n\r\n    const setSavedState = useCallback(newState => {\r\n        localStorage.setItem(key, JSON.stringify(newState));\r\n\r\n        setState(newState);\r\n    }, [key]);\r\n\r\n    return [ state, setSavedState ];\r\n}","import './App.css';\nimport { phase, phase_string } from './moon';\nimport { calcEquiSol, calcMoonPhase } from './stellafane';\nimport { useSavedState } from './useSavedState';\n\nconst DAY_NAMES = {\n  english: [\"Monday\",\"Tuesday\",\"Wedensday\",\"Thursday\",\"Friday\",\"Sauturday\",\"Sunday\"],\n  norse: [\"Moon day\",\"Tiw's day\",\"Woden's day\",\"Thor's day\",\"Freya's day\",\"Sauturn's day\",\"Sun day\"],\n  french: [\"lundi\",\"mardi\",\"mercredi\",\"jeudi\",\"vendredi\",\"samedi\",\"dimanche\"],\n  planets: [\"Moon\",\"Mars\",\"Mercury\",\"Jupiter\",\"Venus\",\"Saturn\",\"Sun\"],\n  latin: [\"diēs Lūnae\",\"diēs Mārtis\",\"diēs Mercuriī\",\"diēs Iovis\",\"diēs Veneris\",\"diēs Sāturnī\",\"diēs Sōlis\"],\n  japanese: [\"月\",\"火\",\"水\",\"木\",\"金\",\"土\",\"日\"],\n  astronomical: [\"☽︎\",\"♂\",\"☿\",\"♃\",\"♀\",\"♄\",\"☉\"],\n  babylonian: [\"Sin\",\"Nergal\",\"Nabu\",\"Marduk\",\"Ishtar\",\"Shabattu\",\"Shamash\"],\n  greek: [\"ἡμέρᾱ Σελήνης\",\"ἡμέρᾱ Ἄρεως\",\"ἡμέρᾱ Ἑρμοῦ\",\"ἡμέρᾱ Διός\",\"ἡμέρᾱ Ἀφροδῑ́της\",\"ἡμέρᾱ Κρόνου\",\"ἡμέρᾱ Ἡλίου\"],\n  hebrew: [\"שני\",\"שלישי\",\"רביעי\",\"חמישי\",\"שישי\",\"שבת\",\"ראשון\"],\n};\n\nconst JULIAN_PREF = {\n  NONE: 0,\n  AT_MIDNIGHT: 1,\n  FROM_NOON: 2,\n  MODIFIED: 3,\n  NASA: 4,\n  J2000: 5,\n};\n\nfunction App() {\n  const [ yearPreference, setYearPreference ] = useSavedState(\"mycal.yearPref\", \"gregorian\");\n  const [ dayNameOrigin, setDayNameOrigin] = useSavedState(\"mycal.dayname\", /** @type {Object.keys(DAY_NAMES)} */\"english\");\n  const [ julianPreference, setJulianPreference ] = useSavedState(\"mycal.julianPreference\", JULIAN_PREF.AT_MIDNIGHT);\n  const [ yearDayPreference, setYearDayPreference ] = useSavedState(\"mycal.yearDayPreference\", 0);\n  const [ monthBands, setMonthBands ] = useSavedState(\"mycal.monthBands\", false);\n\n  const d = startOfWeek(startOfMonth());\n  const weeks = makeWeeks(d, 100);\n\n  const dayHeaderStyle = {\n    fontSize: \"0.5em\",\n  };\n\n  const dayNames = DAY_NAMES[dayNameOrigin] || [];\n\n  /**\n   *\n   * @param {Date} date\n   */\n  function getDayClassName (date) {\n    const d = new Date();\n    const currentMonth = d.getFullYear() === date.getUTCFullYear() && d.getMonth() === date.getUTCMonth();\n    const monthEven = date.getUTCMonth() % 2;\n\n    return `Day ${currentMonth ? \"Day-CurrentMonth\" : \"\"} ${monthEven ? \"Day-MonthEven\" : \"Day-MonthOdd\"}`;\n  }\n\n  const yearAdjust = yearPreference === \"holocene\" ? 1e4 : 0;\n  const dayPreferences = { yearDay: yearDayPreference, julian: julianPreference };\n\n  return (\n    <div className=\"App\">\n      <div className=\"App-Options\">\n        <label>\n          <span>Year</span>{' '}\n          <select\n            value={yearPreference}\n            onChange={e => setYearPreference(e.target.value)}\n          >\n            <option value=\"gregorian\">Gregorian</option>\n            <option value=\"holocene\">Holocene Era</option>\n          </select>\n        </label>\n        <label>\n          <span>Day Names</span>{' '}\n          <select\n            value={dayNameOrigin}\n            onChange={e => setDayNameOrigin(e.target.value)}\n          >\n            <option value=\"english\">English</option>\n            <option value=\"norse\">Norse</option>\n            <option value=\"planets\">Planets</option>\n            <option value=\"french\">French</option>\n            <option value=\"latin\">Latin</option>\n            <option value=\"japanese\">Japanese</option>\n            <option value=\"astronomical\">Astronomical</option>\n            <option value=\"babylonian\">Babylonian</option>\n            <option value=\"greek\">Greek</option>\n            <option value=\"hebrew\">Hebrew</option>\n          </select>\n        </label>\n        <label>\n          <span>Year Day</span>{' '}\n          <input type=\"checkbox\" checked={yearDayPreference === 1} onChange={e => setYearDayPreference(e.target.checked ? 1 : 0)} />\n        </label>\n        <label>\n          <span>Julian</span>{' '}\n          <select\n            value={julianPreference}\n            onChange={e => setJulianPreference(+e.target.value)}\n          >\n            <option value={JULIAN_PREF.NONE}>None</option>\n            <option value={JULIAN_PREF.AT_MIDNIGHT}>At Midnight</option>\n            <option value={JULIAN_PREF.FROM_NOON}>From Noon</option>\n            <option value={JULIAN_PREF.MODIFIED}>Modified</option>\n            <option value={JULIAN_PREF.NASA}>NASA</option>\n            <option value={JULIAN_PREF.J2000}>J2000</option>\n          </select>\n        </label>\n        <label>\n          <span>Month Bands</span>{' '}\n          <input type=\"checkbox\" checked={monthBands} onChange={e => setMonthBands(e.target.checked)} />\n        </label>\n      </div>\n      <table className={monthBands?\"MonthBands\":\"\"}>\n        <thead>\n          <tr>\n            <th></th>\n            {\n              dayNames.map((n,i) => <th key={i} style={dayHeaderStyle}>{n}</th>)\n            }\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {\n            weeks.map((w, i) => {\n              const isStartOfMonth = w.some(d => d.getDate() === 1);\n              const currentWeek = Date.now() >= +w[0] && Date.now() < (+w[0] + 7 * 86400000);\n\n              const n = weekNumber(w[0]);\n\n              return (\n                <tr key={+w[0]} className={currentWeek?\"Week Week-Current\":\"Week\"}>\n                  <th style={{textAlign:\"right\"}}>\n                    {(n === 1 || i === 0) && (yearAdjust + w[6].getFullYear() + \"-\")}\n                    W{n.toString().padStart(2,\"0\")}\n                  </th>\n                  {\n                    w.map(d => (\n                      <td key={+d} className={getDayClassName(d)}>\n                        <DayView date={d} preferences={dayPreferences} />\n                      </td>\n                    ))\n                  }\n                  <th className={getDayClassName(w[6])}>{isStartOfMonth && (w[6].getMonth() + 1)}</th>\n                </tr>\n              );\n            })\n          }\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default App;\n\nfunction DayView ({ date, preferences: { julian: julianPreference, yearDay: yearDayPreference } }) {\n  const isToday = +date === +startOfDay();\n\n  /** @type {import('react').CSSProperties} */\n  const style = {\n    padding: \"0.5em\",\n    margin: \"0.25em\",\n    border: \"1px solid #CCC\",\n    background: isToday ? \"#FFFFCC\" : \"transparent\",\n    position: \"relative\",\n  };\n\n  /** @type {import('react').CSSProperties} */\n  const julianStyle = {\n    fontSize: \"0.5em\",\n    display: \"block\",\n  };\n\n  /** @type {import('react').CSSProperties} */\n  const sunStyle = {\n    position: \"absolute\",\n    top: 0,\n    left: \"0.25em\",\n    lineHeight: \"0.5em\",\n  };\n\n  /** @type {import('react').CSSProperties} */\n  const moonStyle = {\n    position: \"absolute\",\n    top: 0,\n    right: \"0.25em\",\n    lineHeight: \"0.5em\",\n  };\n\n  const allMoon = false;\n\n  let j = 0;\n\n  if (julianPreference !== JULIAN_PREF.NONE) {\n    j = julian(date);\n  }\n\n  switch (julianPreference) {\n    case JULIAN_PREF.FROM_NOON:\n      j += 0.5;\n      break;\n    case JULIAN_PREF.MODIFIED:\n      j -= 2400000.5;\n      break;\n    case JULIAN_PREF.NASA:\n      j -= 2400000.5;\n      j -= 40000;\n      break;\n    case JULIAN_PREF.J2000:\n      j -= 2451545.0;\n      // To match https://heasarc.gsfc.nasa.gov/cgi-bin/Tools/xTime/xTime.pl\n      j += 0.5;\n      break;\n    default:\n  }\n\n  j = j|0;\n\n  return (\n    <div style={style}>\n      <div className=\"Day-Date\">{date.getUTCDate()}</div>\n      <div style={sunStyle}>\n        <SunIndicator date={date} />\n      </div>\n      <div style={moonStyle}>\n        { allMoon ?\n          <MoonIndicatorAll date={date} /> :\n          <MoonIndicator date={date} />\n        }\n      </div>\n      { yearDayPreference !== 0 && <span style={julianStyle}>{yearDay(date)}</span> }\n      { julianPreference !== JULIAN_PREF.NONE && <span style={julianStyle}>{j}</span> }\n    </div>\n  );\n}\n\nfunction SunIndicator ({ date }) {\n  const phases = sunPhases(date);\n  let out = \"\\xA0\"; // &nbsp;\n  let title = \"\";\n\n  if (isSameDay(date, phases[0])) {\n    out = \"☀️\";\n    title = `Vernal Equinox ${formatTime(phases[0])}`;\n  }\n  else if (isSameDay(date, phases[1])) {\n    out = \"☀️\";\n    title = `Summer Solstice ${formatTime(phases[1])}`;\n  }\n  else if (isSameDay(date, phases[2])) {\n    out = \"☀️\";\n    title = `Autumnal Equinox ${formatTime(phases[2])}`;\n  }\n  else if (isSameDay(date, phases[3])) {\n    out = \"☀️\";\n    title = `Winter Solstice ${formatTime(phases[3])}`;\n  }\n\n  return <span style={{fontSize:\"0.5em\"}} title={title}>{out}</span>;\n}\n\nfunction MoonIndicator ({ date }) {\n  if (false) {\n    const phase = moonPhase(date);\n    let out = \"\\xA0\"; // &nbsp;\n    if (phase === 0) out = \"🌑\";\n    else if (phase === 7) out = \"🌓\";\n    else if (phase === 15) out = \"🌕\";\n    else if (phase === 22) out = \"🌗\";\n    return <span style={{fontSize:\"0.5em\"}} title={phase.toString()}>{out}</span>;\n  }\n\n  if (false) moonPhases(date);\n  const phases = moonPhases2(date);\n  let out = \"\\xA0\"; // &nbsp;\n  let title = \"\";\n\n  if (isSameDay(date, phases[0])) {\n    out = \"🌑\";\n    title = formatTime(phases[0]);\n  }\n  else if (isSameDay(date, phases[1])) {\n    out = \"🌓\";\n    title = formatTime(phases[1]);\n  }\n  else if (isSameDay(date, phases[2])) {\n    out = \"🌕\";\n    title = formatTime(phases[2]);\n  }\n  else if (isSameDay(date, phases[3])) {\n    out = \"🌗\";\n    title = formatTime(phases[3]);\n  }\n  else if (isSameDay(date, phases[4])) {\n    out = \"🌑\";\n    title = formatTime(phases[4]);\n  }\n\n  return <span style={{fontSize:\"0.5em\"}} title={title}>{out}</span>;\n}\n\nfunction MoonIndicatorAll ({ date }) {\n  const str = phase_string(phase(julian(date)).phase);\n  let out = \"\\xA0\"; // &nbsp;\n  if (str === \"new\") out = \"🌑\";\n  else if (str === \"waxing crescent\") out = \"🌒\";\n  else if (str === \"first quarter\") out = \"🌓\";\n  else if (str === \"waxing gibbous\") out = \"🌔\";\n  else if (str === \"full\") out = \"🌕\";\n  else if (str === \"waning gibbous\") out = \"🌖\";\n  else if (str === \"last quarter\") out = \"🌗\";\n  else if (str === \"waning crescent\") out = \"🌘\";\n  return <span style={{fontSize:\"0.5em\"}}>{out}</span>;\n}\n\nfunction makeWeeks(d, count) {\n  const weeks = [];\n\n  for (let i = 0; i < count; i++) {\n    const week = [];\n\n    for (let j = 0; j < 7; j++) {\n      week.push(new Date(d));\n\n      d.setDate(d.getDate() + 1);\n    }\n\n    weeks.push(week);\n  }\n  return weeks;\n}\n\nfunction startOfMonth (date = new Date()) {\n  const d = new Date(date.getUTCFullYear(), date.getUTCMonth());\n  modifyToUTC(d);\n  return d;\n}\n\nfunction startOfWeek (date = new Date()) {\n  const d = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate() - date.getUTCDay() + 1);\n  modifyToUTC(d);\n  return d;\n}\n\nfunction startOfDay (date = new Date()) {\n  const d = new Date(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate());\n  modifyToUTC(d);\n  return d;\n}\n\n\n/**\n * ISO Week Number\n * Algorithm from https://www.epochconverter.com/weeknumbers\n */\nfunction weekNumber (date = new Date()) {\n  const target  = new Date(date);\n  const dayNr   = (date.getUTCDay() + 6) % 7;\n\n  target.setDate(target.getDate() - dayNr + 3);\n  const firstThursday = +target;\n\n  target.setMonth(0, 1);\n\n  if (target.getDay() !== 4) {\n      target.setMonth(0, 1 + ((4 - target.getDay()) + 7) % 7);\n  }\n\n  return 1 + Math.ceil((firstThursday - +target) / 604800000);\n}\n\n/**\n * Algorithm from https://quasar.as.utexas.edu/BillInfo/JulianDatesG.html\n */\nfunction julian (date = new Date()) {\n  let y = date.getUTCFullYear();\n  let m = date.getUTCMonth() + 1;\n  const d = date.getUTCDate();\n\n  if (m < 3) {\n      y--;\n      m += 12;\n  }\n\n  const a = (y / 100)|0;\n  const b = (a / 4)|0;\n  const c = 2 - a + b;\n  const e = (365.25 * (y + 4716))|0;\n  const f = (30.6001 * (m + 1))|0;\n\n  const h = date.getUTCHours();\n  const i = date.getUTCMinutes();\n  const s = date.getUTCSeconds();\n  const ms = date.getUTCMilliseconds();\n\n  const g = (h + (i + (s + (ms / 1000)) / 60 / 60)) / 24;\n\n  return c + d + e + f - 1524 - 0.5 + g;\n}\n\nfunction moonPhase (date = new Date()) {\n  if (false) return moonPhase1(date);\n  if (false) return moonPhase2(date);\n  if (false) return moonPhase3(date);\n  return moonPhase4(date);\n}\n\n/**\n * Algorithm from http://www.ben-daglish.net/moon.shtml\n * @param {Date} date\n * @returns\n */\nfunction moonPhase1 (date = new Date()) {\n  const year = date.getUTCFullYear();\n  const month = date.getUTCMonth() + 1;\n  const day = date.getUTCDay();\n\tlet r = year % 100;\n\tr %= 19;\n\tif (r>9){ r -= 19;}\n\tr = ((r * 11) % 30) + month + day;\n\tif (month<3){r += 2;}\n\tr -= ((year<2000) ? 4 : 8.3);\n\tr = Math.floor(r+0.5)%30;\n\treturn (r < 0) ? r+30 : r;\n}\n\n/**\n * Algorithm from http://www.ben-daglish.net/moon.shtml\n * @param {Date} date\n * @returns\n */\nfunction moonPhase2 (date = new Date()) {\n  const year = date.getUTCFullYear();\n  const month = date.getUTCMonth() + 1;\n\tconst n = Math.floor(12.37 * (year - 1900 + ((1 * month - 0.5)/12.0)));\n\tconst RAD = 3.14159265/180.0;\n\tconst t = n / 1236.85;\n\tconst t2 = t * t;\n\tconst as = 359.2242 + 29.105356 * n;\n\tconst am = 306.0253 + 385.816918 * n + 0.010730 * t2;\n\tlet xtra = 0.75933 + 1.53058868 * n + ((1.178e-4) - (1.55e-7) * t) * t2;\n\txtra += (0.1734 - 3.93e-4 * t) * Math.sin(RAD * as) - 0.4068 * Math.sin(RAD * am);\n\tconst i = (xtra > 0.0 ? Math.floor(xtra) :  Math.ceil(xtra - 1.0));\n\tconst j1 = julian(date);\n\tconst jd = (2415020 + 28 * n) + i;\n\treturn (j1-jd + 30)%30;\n}\n\nfunction moonPhase3 (date = new Date()) {\n  return Math.round(phase(julian(date)).phase * 30) % 30;\n}\n\n// Algorithm by me\nfunction moonPhases (date = new Date()) {\n  // From https://minkukel.com/en/various/calculating-moon-phase/\n  // const synodic_month = 29.53058770576;\n\n  // From wikipedia\n  const T = (julian(date)-2451545.0)/36525;\n  const synodic_month = 29.5305888531 + 0.00000021621 * T - 3.64e-10 * T * T;\n\n  // From regression of full moons in 2021\n  // const synodic_month = 29.555744949494947;\n\n  const synodic_month_millis = synodic_month * 86400 * 1000;\n\n  // const epoch_new_moon = new Date(\"2000-01-06T18:14Z\");\n  // const epoch_new_moon = new Date(\"2020-01-03T04:45:00Z\");\n  const epoch_new_moon = new Date(\"2021-01-13T05:00:00Z\");\n\n  const delta = +date - +epoch_new_moon;\n\n  const lunar_cycle_count = (delta / synodic_month_millis)|0;\n\n  const newMoon = new Date(+epoch_new_moon + (lunar_cycle_count * synodic_month_millis));\n\n  const firstQuarter = new Date(+newMoon + 1/4 * synodic_month_millis);\n\n  const fullMoon = new Date(+newMoon + 1/2 * synodic_month_millis);\n\n  const lastQuarter = new Date(+newMoon + 3/4 * synodic_month_millis);\n\n  const nextNewMoon = new Date(+newMoon + synodic_month_millis);\n\n  return [\n    newMoon,\n    firstQuarter,\n    fullMoon,\n    lastQuarter,\n    nextNewMoon,\n  ];\n}\n\nfunction moonPhase4 (date = new Date()) {\n  const phases = moonPhases(date);\n\n  if (isSameDay(date, phases[0])) return 0;\n  if (isSameDay(date, phases[1])) return 7;\n  if (isSameDay(date, phases[2])) return 15;\n  if (isSameDay(date, phases[3])) return 22;\n  if (isSameDay(date, phases[4])) return 0;\n\n  return -1;\n}\n\n// https://stellafane.org/observing/moon_phase.html\nfunction moonPhases2 (date = new Date()) {\n  const { new: newMoons, full: fullMoons } = calcMoonPhase(date.getUTCFullYear());\n\n  const nextNewMoonIndex = newMoons.findIndex(n => +n > +date);\n  const prevNewMoonIndex = nextNewMoonIndex - 1;\n\n  if (prevNewMoonIndex < 0) {\n    throw Error(\"Can't find the moon\");\n  }\n\n  const prevNewMoon = newMoons[prevNewMoonIndex];\n  const fullMoon = fullMoons[prevNewMoonIndex];\n  const nextNewMoon = newMoons[nextNewMoonIndex];\n\n  const firstQuarter = new Date((+prevNewMoon + +fullMoon) / 2);\n  const lastQuarter = new Date((+fullMoon + +nextNewMoon) / 2);\n\n  return [\n    prevNewMoon,\n    firstQuarter,\n    fullMoon,\n    lastQuarter,\n    nextNewMoon,\n  ];\n}\n\n/**\n *\n * @param {Date} date1\n * @param {Date} date2\n */\nfunction isSameDay (date1, date2) {\n  return date1.getFullYear() === date2.getFullYear()\n    && date1.getMonth() === date2.getMonth()\n    && date1.getDate() === date2.getDate();\n}\n\nfunction formatTime (date = new Date()) {\n  return `${date.getUTCHours().toString().padStart(2,\"0\")}:${date.getUTCMinutes().toString().padStart(2,\"0\")}`;\n}\n\nfunction yearDay (date = new Date()) {\n  const first_jan = new Date(date.getUTCFullYear(), 0, 1);\n  modifyToUTC(first_jan);\n\n  return julian(date) - julian(first_jan) + 1;\n}\n\n// https://stellafane.org/misc/equinox.html\nfunction sunPhases (date = new Date()) {\n  return [...Array(4)].map((_,i) => calcEquiSol(i, date.getUTCFullYear()));\n}\n\n/**\n * Assume that times have been set in local time but they were intended to be UTC\n * @param {Date} date\n */\nfunction modifyToUTC (date) {\n  date.setTime(date.getTime() - date.getTimezoneOffset() * 60 * 1000);\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}